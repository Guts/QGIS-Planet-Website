---
source: "blog"
title: "Tutorial: Updating Raster NoData Value with Rasterio"
date: "2024-11-27T00:00:00"
link: "https://kartoza.com/update-raster-nodata"
draft: "false"
showcase: "planet"
subscribers: ["kartoza"]
author: "Kartoza"
tags: []
languages: ["en_gb"]
available_languages: ["en_gb"]
---

<div class="ql-editor read-mode"><p><img src="https://kartoza.com/files/6tZWObm.png" /></p><p><br /></p><p>A raster NoData value is a special value assigned to cells in a raster dataset to indicate the absence of valid data for that location. It marks areas where there is no information or where data is missing, ensuring that these cells are excluded from calculations or analysis.</p><p><br /></p><p><img src="https://kartoza.com/files/Vg87fa9.png" /></p><p><em>This is the nodata value before update</em></p><p><br /></p><p><img src="https://kartoza.com/files/KusBDjV.png" /></p><p><em>This is the nodata value after update</em></p><p><br /></p><p>In the <a href="https://github.com/kartoza/cplus-api/" rel="noopener noreferrer">CPLUS API</a>, which is part of the&nbsp;<a href="https://github.com/ConservationInternational/cplus-plugin" rel="noopener noreferrer">CPLUS Plugin</a> that we are building for Conservation International, we integrate Natural Climate Solution (NCS) Pathways from <a href="https://app.naturebase.org/data" rel="noopener noreferrer">Naturebase</a>. In our workflow, we update raster NoData value to -9999, to enable performing raster calculations. We will be using <a href="https://rasterio.readthedocs.io/en/stable/" rel="noopener noreferrer">Rasterio</a> in this tutorial, so you need to make sure you have it installed.</p><p><br /></p><p>Once you have Rasterio on your system, you can follow this snippet.</p><pre class="ql-code-block-container"><div class="ql-code-block">import rasterio</div><div class="ql-code-block"><br /></div><div class="ql-code-block">input_raster = 'input_raster.tiff'</div><div class="ql-code-block">output_raster = 'output_raster.tiff'</div><div class="ql-code-block">new_nodata_value = -9999</div><div class="ql-code-block"><br /></div><div class="ql-code-block">with rasterio.open(input_raster) as dataset:</div><div class="ql-code-block"> &nbsp; &nbsp;profile = dataset.profile</div><div class="ql-code-block"> &nbsp; &nbsp;data = dataset.read()</div><div class="ql-code-block"><br /></div><div class="ql-code-block"> &nbsp; &nbsp;# Set the new nodata value in the profile</div><div class="ql-code-block"> &nbsp; &nbsp;profile.update(nodata=new_nodata_value)</div><div class="ql-code-block"><br /></div><div class="ql-code-block"> &nbsp; &nbsp;# Replace the current nodata value with the new nodata value in the data array</div><div class="ql-code-block"> &nbsp; &nbsp;data[data == dataset.nodata] = new_nodata_value</div><div class="ql-code-block"><br /></div><div class="ql-code-block"> &nbsp; &nbsp;# Write the output raster with the updated nodata value</div><div class="ql-code-block"> &nbsp; &nbsp;with rasterio.open(output_path, "w", **profile) as dst:</div><div class="ql-code-block"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dst.write(data)</div></pre><p><br /></p><p>I will explain the snippets</p><p><br /></p><p>Define the input raster, output raster, and nodata value</p><pre class="ql-code-block-container"><div class="ql-code-block">input_raster = 'input_raster.tiff'</div><div class="ql-code-block">output_raster = 'output_raster.tiff'</div><div class="ql-code-block">new_nodata_value = -9999</div></pre><p><br /></p><p>Open input raster, then read the profile and the data. Raster profile basically contains raster metadata, like nodata value, block size, etc.</p><pre class="ql-code-block-container"><div class="ql-code-block">with rasterio.open(input_raster) as dataset:</div><div class="ql-code-block"> &nbsp; &nbsp;profile = dataset.profile</div><div class="ql-code-block"> &nbsp; &nbsp;data = dataset.read()</div></pre><p><br /></p><p>Set NoData value in the profile and replace the NoData value with the new value</p><pre class="ql-code-block-container"><div class="ql-code-block"> &nbsp; &nbsp;# Set the new nodata value in the profile</div><div class="ql-code-block"> &nbsp; &nbsp;profile.update(nodata=new_nodata_value)</div><div class="ql-code-block"> &nbsp; &nbsp;</div><div class="ql-code-block"> &nbsp; &nbsp;# Replace the current nodata value with the new nodata value in the data array</div><div class="ql-code-block"> &nbsp; &nbsp;data[data == dataset.nodata] = new_nodata_value</div></pre><p>Finally, write the data into a raster file using the updated profile.</p><pre class="ql-code-block-container"><div class="ql-code-block"> &nbsp; &nbsp;# Write the output raster with the updated nodata value</div><div class="ql-code-block"> &nbsp; &nbsp;with rasterio.open(output_path, "w", **profile) as dst:</div><div class="ql-code-block"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dst.write(data)</div></pre><p><br /></p><p>You can customise the snippets above to suit your needs. For example, you can set the output and input raster paths based on your own data.</p></div>
